<!DOCTYPE html>
<html>
<head>
  <title>
    Cоздать шаблон
  </title>
  	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>


<body>
	<section id="header">
	<nav class="navbar navbar-expand- navbar-light bg-light">
  <a class="navbar-brand" href="https://www.spbstu.ru/" ><img src="./Index_files/polytech_logo.svg" width="150" height="50" alt=""></a>
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Студент политеха
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="https://lk.spbstu.ru/">Профиль</a>
		  <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="https://www.spbstu.ru/">Выйти</a>
        </div>
    </ul>
</nav>
	
<section id="new-main"><div id="content">
<main>
<h3 align="center">Введите необходимую информацию</h3>
  <div class="container">
  <form id="myform">
  <div id="institute_id" class="form-group col-md-6">
      <label for="institute">Институт</label>
      <select id="institute" class="form-control" required>
		<option value="0" selected disabled>Выберите институт</option>
        <option value="1">Гуманитарный институт</option>
		<option value="2">Инженерно-строительный институт</option>
		<option value="3">Институт биомедицинских систем и биотехнологий</option>
		<option value="4">Институт кибербезопасности и защиты информации</option>
		<option value="5">Институт компьютерных наук и технологий</option>
		<option value="6">Институт машиностроения, материалов и транспорта</option>
		<option value="7">Институт передовых производственных технологий</option>
		<option value="8">Институт физической культуры, спорта и туризма</option>
		<option value="9">Институт электроники и телекоммуникаций</option>
		<option value="10">Институт энергетики</option>
		<option value="11">Физико-механический институт</option>
		<option value="12">Институт промышленного менеджмента, экономики и торговли</option>
      </select>
    </div>
	
	<div id="higherSchool_id"class="form-group col-md-6">
      <label for="higherSchool">Высшая школа</label>
      <select id="higherSchool" class="form-control" disabled required>
        <option value="0" disabled selected>Выберите высшую школу</option>
      </select>
    </div>
	
	<script>
var all_HighSchools=[];
 
 
all_HighSchools[0]=["Высшая школа инженерной педагогики, психологии и прикладной лингвистики","Высшая школа лингводидактики и перевода","Высшая школа медиакоммуникаций и связей с общественностью","Высшая школа международных отношений","Высшая школа юриспруденции и судебно-технической экспертизы"];
all_HighSchools[1]=["Высшая школа гидротехнического и энергетического строительства","Высшая школа дизайна и архитектуры","Высшая школа промышленно-гражданского и дорожного строительства","Высшая школа техносферной безопасности"];
all_HighSchools[2]=["Высшая школа биомедицинских систем и технологий","Высшая школа биотехнологий и пищевых производств"];
all_HighSchools[3]=["Информационная безопасность мобильных систем Корпорации LG Electronics Inс."];
all_HighSchools[4]=["Высшая школа киберфизических систем и управления","Высшая школа программной инженерии","Высшая школа интеллектуальных систем и суперкомпьютерных технологий","Высшая школа искусственного интеллекта"];
all_HighSchools[5]=["Высшая школа автоматизации и робототехники","Высшая школа машиностроения","Высшая школа транспорта","Высшая школа физики и технологий материалов"];
all_HighSchools[6]=["Высшая школа передовых цифровых технологий","Высшая школа технологического предпринимательства"];
all_HighSchools[7]=["Высшая школа профессиональных тренеров по дзюдо им. А.С. Рахлина","Высшая школа спортивной педагогики"];
all_HighSchools[8]=["Высшая инженерно-физическая школа","Высшая школа прикладной физики и космических технологий","Высшая школа электроники и микросистемной техники"];
all_HighSchools[9]=["Высшая школа атомной и тепловой энергетики","Высшая школа высоковольтной энергетики","Высшая школа электроэнергетических систем","Высшая школа энергетического машиностроения"];
all_HighSchools[10]=["Высшая школа механики и процессов управления","Высшая школа прикладной математики и вычислительной физики","Высшая школа теоретической механики","Высшая школа фундаментальных физических исследований"];
all_HighSchools[11]=["Высшая инженерно-экономическая школа","Высшая школа административного управления","Высшая школа бизнес-инжиниринга","Высшая школа производственного менеджмента","Высшая школа сервиса и торговли"];

institute.onchange=function(){
higherSchool.disabled=false;
higherSchool.innerHTML="<option value='0'>Выберите высшую школу</option>";
var myHighSchool=this.value-1;
if(myHighSchool!=-1){
    for(var i=0;i<all_HighSchools[myHighSchool].length;i++){
        higherSchool.innerHTML+='<option value="'+(i+1)+'">'+all_HighSchools[myHighSchool][i]+'</option>';
    }
}else{
   higherSchool.disabled=true;
}
}
</script>

<div id="discipline_id" class="form-group col-md-6">
    <label for="discipline">Дисциплина</label>
    <input type="text" class="form-control" id="discipline" placeholder="Технологии разработки программного обеспечения" required>
  </div>
  <div id="type_id" class="form-group col-md-4">
      <label for="type">Тип документа</label>
      <select id="type" class="form-control" required>
        <option value="0">Отчет по лабораторной работе</option>
		<option value="1">Дипломная работа</option>
		<option value="2">Что-то еще</option>
      </select>
    </div>
	<div id="number_id" class="form-group col-md-4">
    <label for="number">№ отчета</label>
    <input type="number" class="form-control" id="number" placeholder="1" required>
  </div>
  
  <div id="topic_id" class="form-group col-md-6">
    <label for="topic">Тема</label>
    <input type="text" class="form-control" id="topic">
	</div>
  <div id="variant_id" class="form-group col-md-4">
    <label for="variant">Вариант №</label>
    <input type="number" class="form-control" id="variant" placeholder="1">
  </div>
    <div id="student_id" class="form-group col-md-4">
      <label for="student">ФИО студента</label>
      <input type="name" class="form-control" id="studentName" placeholder="Иванов П.А." required>
    </div>
    <div id="teacher_id" class="form-group col-md-4">
      <label for="teacherName">ФИО преподавателя</label>
      <input type="name" class="form-control" id="teacherName" placeholder="Петров А.И." required>
    </div>
  <div id="group_id" class="form-group col-md-4">
    <label for="groupNumber">Номер группы</label>
    <input type="text" class="form-control" id="groupNumber" placeholder="3540901/11502" required>
  </div>
  <div id="year_id" class="form-group col-md-4">
    <label for="year">Год</label>
    <input type="number" class="form-control" id="year" value="2021"" required>
  </div>
  
  <h3 align="center"></h3>
  
  <button  onclick="sendTexJSON()" class="btn btn-primary">Получить TeX файл</button>
  <button  onclick="sendPdfJSON()" class="btn btn-primary">Получить Pdf файл</button>
	

<script>
  function sendTexJSON() {

	var sel = document.getElementById("institute");
	var institute = sel.options[sel.selectedIndex].text; 
	
	var sel2 = document.getElementById("higherSchool");
	var higherSchool = sel2.options[sel2.selectedIndex].text;
	
	let discipline = document.getElementById('discipline');
	
	var sel3 = document.getElementById("type");
	var type = sel3.options[sel3.selectedIndex].text;

	let number = document.getElementById('number');
	let topic = document.getElementById('topic');
	let variant = document.getElementById('variant');
	let studentName = document.getElementById('studentName');
	let teacherName = document.getElementById('teacherName');
	let groupNumber = document.getElementById('groupNumber');
	let year = document.getElementById('year');
    
    let result = document.querySelector('.result');
  
    let xhr = new XMLHttpRequest();
 
    let url = "http://localhost:8080/generate?documentExtension=tex";

    xhr.open("POST", url, true);

    xhr.setRequestHeader("Content-Type", "application/json");
   
    xhr.onreadystatechange = function () {
   
      if (xhr.readyState === 4 && xhr.status === 200) {

        result.innerHTML = this.responseText;
      }
    };

var data = JSON.stringify({ "institute": institute, "higherSchool": higherSchool, "discipline": discipline.value, "type": type, "number": number.value, "topic": topic.value, "variant": variant.value, "studentName": studentName.value, "teacherName": teacherName.value, "groupNumber": groupNumber.value, "year": year.value});


    xhr.send(data);
  }
</script>

<script>
  function sendPdfJSON() {

	var sel = document.getElementById("institute");
	var institute = sel.options[sel.selectedIndex].text; 
	
	var sel2 = document.getElementById("higherSchool");
	var higherSchool = sel2.options[sel2.selectedIndex].text;
	
	let discipline = document.getElementById('discipline');
	
	var sel3 = document.getElementById("type");
	var type = sel3.options[sel3.selectedIndex].text;

	let number = document.getElementById('number');
	let topic = document.getElementById('topic');
	let variant = document.getElementById('variant');
	let studentName = document.getElementById('studentName');
	let teacherName = document.getElementById('teacherName');
	let groupNumber = document.getElementById('groupNumber');
	let year = document.getElementById('year');
    
    let result = document.querySelector('.result');
  
    let xhr = new XMLHttpRequest();
 
    let url = "http://localhost:8080/generate?documentExtension=pdf";

    xhr.open("POST", url, true);

    xhr.setRequestHeader("Content-Type", "application/json");
   
    xhr.onreadystatechange = function () {
   
      if (xhr.readyState === 4 && xhr.status === 200) {

        result.innerHTML = this.responseText;
      }
    };

var data = JSON.stringify({ "institute": institute, "higherSchool": higherSchool, "discipline": discipline.value, "type": type, "number": number.value, "topic": topic.value, "variant": variant.value, "studentName": studentName.value, "teacherName": teacherName.value, "groupNumber": groupNumber.value, "year": year.value});


    xhr.send(data);
  }
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</div>
</form>
</body>
</html>